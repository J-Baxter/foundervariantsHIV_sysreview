# Inferring the multiplicity of founder variant initiating HIV-1 infection: a systematic review and meta-analysis

This repository contains the code and data associated with the above manuscript.

## Data
All the required data to run the code is available in the data.zip file. It is not necessary to decompress this file manually as this is done automatically using the Retrieve function in generalpurpose_funcs.R

## Scripts
All scripts marked binary refer to the calculation of the proportion of infections initiated by multiple variants (ie single vs multiple founders), rather than the number of variants that initiated infection. 

On opening the project for the first time, .Rprofile will install the renv package. At the start of each script load_packages.R will run to ensure the correct packages and dependencies are installed and loaded to run the analysis. If the correct packages are not available, then renv will ask permission to install the necessary packages as detailed in the lockfile. You may continue to run the analyses without the specified versions, but this may introduce bugs. Details of the original platform used for the analysis are available in platform.txt. Each script will be able to run, with outputs posted to a 'results' directory and figures to a 'figures' directory. 

NB: if re-running the analysis, files will be overwritten unless moved to another directory/results directory is renamed eg; ./results-deprecated/.  

binary_pooling.R, binary_univarmetareg.R and binary_metareg.R encode the analyses for pooling, univariable meta-analysis and multivariable meta-analysis respectively. Each script contains the respective sensitivity analyses. **Some of these sensitivity analyses require hours to run as we are resampling and recalculating the models a thousand times**

Postprocessing may be required in order to retrieve the plots generated by binary_poolng_vis.R and binary_metareg_vis.R. Exporting figures in eps format on specific system dependencies may require additional setup not specified in this repo.